{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}

{% block css %}
  <link rel="stylesheet" href="{% static 'css/change_password.css' %}">
{% endblock css %}

{% block content %}

  <div class="signup-form">

    <div class="title">비밀번호 변경</div>

    <form method="POST" novalidate="novalidate">
      {% csrf_token %}
      <div class="user-details">
        <div class="input-box">
          <label class="details" name="label_old_password" for="{{ form.old_password.id_for_label }}">{{ form.old_password.label }}</label>
          {{ form.old_password }}
          <script type="text/javascript">
            if (document.getElementsByName('old_password')[0].value != '') {
              document
                .getElementsByName('label_old_password')[0]
                .setAttribute('class', 'active');
            }
          </script>
          {% if form.old_password.errors %}
            <script type="text/javascript">
              document
                .getElementsByName('old_password')[0]
                .setAttribute('class', 'is-invalid')
            </script>
            {% for error in form.old_password.errors %}
              <div class="invalid-feedback">
                {{ error }}
              </div>
            {% endfor %}
          {% endif %}
        </div>

        <div class="input-box"></div>

        <div class="input-box">
          <label class="details" name="label_new_password1" for="{{ form.new_password1.id_for_label }}">{{ form.new_password1.label }}</label>
          {{ form.new_password1 }}
          <script type="text/javascript">
            if (document.getElementsByName('new_password1')[0].value != '') {
              document
                .getElementsByName('label_new_password1')[0]
                .setAttribute('class', 'active');
            }
          </script>
          {% if form.new_password1.errors %}
            <script type="text/javascript">
              document
                .getElementsByName('new_password1')[0]
                .setAttribute('class', 'is-invalid')
            </script>
            {% for error in form.new_password1.errors %}
              <div class="invalid-feedback">
                {{ error }}
              </div>
            {% endfor %}
          {% endif %}
        </div>

        <div class="input-box">
          <label class="details" name="label_new_password2" for="{{ form.new_password2.id_for_label }}">{{ form.new_password2.label }}</label>
          {{ form.new_password2 }}
          <script type="text/javascript">
            if (document.getElementsByName('new_password2')[0].value != '') {
              document
                .getElementsByName('label_new_password2')[0]
                .setAttribute('class', 'active');
            }
          </script>
          {% if form.new_password2.errors %}
            <script type="text/javascript">
              document
                .getElementsByName('new_password2')[0]
                .setAttribute('class', 'is-invalid')
            </script>
            {% for error in form.new_password2.errors %}
              <div style="white-space: nowrap;" class="invalid-feedback">
                {{ error }}
              </div>
            {% endfor %}
          {% endif %}
          <small>
            최소 8개의 숫자와 문자 또는 특수기호를 입력해주세요.
          </small>
        </div>

        <div class="button">
          <input type="submit" value="변경">
        </div>
      </div>
    </form>
  </div>
{% endblock %}